Title: [WO WO-20250903-002] Persist summaries with versioned caching; decouple publish

Problem
- Summaries were ephemeral and recomputed at publish time, causing unnecessary work and making idempotency/versioning difficult.
- Publish was coupled to summarize(), preventing reuse of persisted results and deterministic caching.

Approach
- Added SQLite table `summaries` with columns: cluster_id TEXT PK, tl_dr TEXT, bullets_json TEXT, citations_json TEXT, score REAL, created_at TEXT, published_at TEXT NULL, version_hash TEXT.
- Introduced PROMPT_VERSION and GUARDRAILS_VERSION and compute `version_hash = sha256(PROMPT_VERSION + GUARDRAILS_VERSION + sorted(article_ids) + joined_extracted_facts)`.
- Refactored `summarize()` to build bullets/citations as before, derive a concise X-shaped `tl_dr`, compute `version_hash`, and upsert one row per cluster (idempotent: skip update if version_hash unchanged).
- Implemented `pipeline.main.publish(out_dir, ...)` that reads persisted summaries from DB (no recomputation), ranks via `rank.score_clusters()`, and writes `summaries.md` and `clusters.json` with unchanged shapes/fields. Also marks `published_at`.
- Added IO helpers: `upsert_summary`, `fetch_summaries`, `mark_published`.

Tradeoffs
- Stored `score` column for potential future use; current ranking still joins live scores from `rank.score_clusters()` to avoid staleness.
- `tl_dr` is heuristically derived from the first bullet (deterministic and concise); can be refined later without breaking cache if versions change.

Test Evidence
- Unit tests added: `tests/test_summarize_persist.py`.
  - summarize twice -> single row unchanged; stable 64-hex `version_hash`.
  - publish reads DB and `summaries.md` contains "Bottom line:".
- Local run: `pytest -q` passed (offline with `EMBED_OFFLINE=1`).

Risks & Mitigations
- Schema drift/idempotency: use `CREATE TABLE IF NOT EXISTS`; upsert skips when `version_hash` unchanged to preserve `created_at`.
- Caching correctness: explicit PROMPT/GUARDRAILS versions included in hash; change them on prompt/guardrail changes.
- Empty DB publish: publish logs and returns early if no summaries exist.

Checklists
- Lint: n/a (repo style minimal); types: n/a.
- Tests: added and passing; offline-only.
- Coverage: best effort within repo norms; unit coverage increased around summarize/publish path.
- SEC scan: no secrets added; offline path uses deterministic embeddings.

Labels
- feat, backend, pipelines

Reviewers
- @maintainer

Auto-merge
- Please enable auto-merge on green.

Post-merge Comment
- “WO WO-20250903-002: criteria met; artifacts attached. Ready.”

