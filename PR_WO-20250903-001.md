#[WO WO-20250903-001] Replace SimHash clustering with MinHash/LSH (datasketch)

Status: Draft PR
Labels: feat, backend, pipelines
Reviewers: @maintainer
Auto-merge: enable on green

## Problem
Per ARCHITECT.md, clustering/dedupe must use MinHash/LSH over 5-gram shingles with a Jaccard threshold (default 0.85). The codebase used a SimHash-based approach with a Hamming threshold and ad-hoc word-set Jaccard fallback, and the CLI exposed a `threshold` param tied to SimHash. Tests and docs referenced SimHash.

## Approach
- Implement MinHash/LSH via `datasketch` over 5-gram word shingles.
  - Deterministic tokens (regex `\w+`, lowercase) and shingles.
  - MinHash with `num_perm` param (default 128) and fixed `seed=1` for determinism.
  - LSH with `threshold=jaccard_threshold` (default 0.85), `num_perm` propagated.
  - Build a similarity graph using LSH candidates and confirm with exact Jaccard on 5-gram shingles; clusters = connected components.
  - Preserve strong tie for identical `canonical_url`.
- Persistence/output unchanged in shape; set `clusters.method = "minhash-lsh"`.
- Preserve centroid embedding computation and representative selection (longest text).
- CLI: add `--jaccard-threshold` (float, default 0.85) and `--num-perm` (int, default 128) to `cluster` subcommand.
  - Back-compat: the Python API `cluster()` accepts legacy `threshold` kwarg (ignored) to keep existing tests/internals stable.
- Add dependency `datasketch==1.6.5` to `pyproject.toml`.
- Update tests and README.

## Tradeoffs
- Using exact Jaccard on candidate pairs (post-LSH) slightly increases CPU per pair but improves precision and determinism for small-to-medium corpora (MVP scale). For larger datasets, this remains efficient due to LSH pruning.
- Word 5-gram shingles prioritize near verbatim duplicates; paraphrases with significant reordering may not cluster at 0.85—aligned with ARCHITECT.md. Threshold and `num_perm` are user-tunable.

## Testing & Evidence
- Unit tests updated:
  - Near-duplicate texts co-cluster; dissimilar texts do not.
  - Deterministic behavior verified across two runs.
- Offline compatibility: `EMBED_OFFLINE=1` used; no OpenAI calls required.
- Local run:
  - `pytest -q` -> all tests pass (see CI for coverage figures).

## Risks & Mitigations
- False merges/splits at default threshold:
  - Mitigated via exact Jaccard check and configurable `--jaccard-threshold`.
- Performance for long texts:
  - 5-gram choice and LSH candidate pruning; `--num-perm` tunable.
- New dependency:
  - `datasketch` is lightweight and widely used.

## Checklists
- Lint/Type: repo norms (no strict linters configured); style preserved.
- Tests: pass locally (pytest). Coverage expected within repo norms; CI to confirm.
- Security: no secrets added; offline tests; existing env var usage unchanged.
- Docs: README updated with MinHash/LSH and new flags.

## How to validate
- `uv pip install -e .` or `pip install -e .` to pull `datasketch`.
- `pytest -q` with `EMBED_OFFLINE=1`.
- Optional: `python -m pipeline cluster --jaccard-threshold 0.85 --num-perm 128` on a small DB.

## Notes
- Branch: feat/WO-20250903-001-minhash-lsh-clustering
- On merge, please tag the PR with feat/backend/pipelines and enable auto-merge on green.
- Comment to post after CI: “WO WO-20250903-001: criteria met; artifacts attached. Ready.”
